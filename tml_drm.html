<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
      @import url('https://fonts.googleapis.com/css2?family=Noto+Serif+HK:wght@200..900&display=swap');
      @import url('https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300..800;1,300..800&family=Roboto:wght@500&display=swap');
      .ctext {
        font-family: "Noto Serif HK", serif;
        font-optical-sizing: auto;
        font-weight: 200;
        font-style: normal;
      }
      .etext {
        font-family: "Roboto", serif;
        font-weight: 500;
        font-style: normal;
      }
      body :not(.etext) {
        font-family: "Noto Serif HK", serif;
      }
      :root {
        --DRM_Scale: 95vw;
      }
      .DRM_Base {
        position: relative;
        height: calc(var(--DRM_Scale)/3.6);
        width: var(--DRM_Scale);
        border: calc(var(--DRM_Scale)/160) solid DimGray;
      }
      .Line {
        position: absolute;
        left: 50%;
        top: 50%;
        transform: translate(-50%, -50%);
        height: calc(var(--DRM_Scale)/100);
        width: calc(var(--DRM_Scale)/1.05);
        #align-content: space-evenly;
        #display: table;
        #justify-content: space-between;
      }
      .Circ {
        height: calc(var(--DRM_Scale)/86);
        width: calc(var(--DRM_Scale)/86);
        border-radius: 100%;
        border: calc(var(--DRM_Scale)/660) solid;
      }
      .StnNameC {
        display: table-row;
        text-align: center;
        font-weight: 580;
        font-size: calc(var(--DRM_Scale)/86);
        margin: calc(var(--DRM_Scale)/30*-1) 0px 0px;
        width: calc(var(--DRM_Scale)/28.6);
      }
    </style>
  </head>
  <body>
    <h1 style="width: 100%; height: 50px; color: White; background-color: #9B2E08;">屯馬綫動態路綫圖</h1>
    <div class="DRM_Base" id="DRM">
    </div>
    <input type="button" value="更新" onclick="Update()">
    <script>
      let No_of_Stn = 4;
      let Stn_Passed = 0; 
      const Stn_C = ["屯門", "兆康", "天水圍", "朗屏", "元朗", "錦上路", "荃灣西", "美孚", "南昌", 
                         "柯士甸", "尖東", "紅磡", "何文田", "土瓜灣", "宋皇臺", "啟德", "鑽石山", 
                         "顯徑", "大圍", "車公廟", "沙田圍", "第一城", "石門", "大水坑", "恆安", 
                         "馬鞍山", "烏溪沙"];
      const Stn_E = ["Tuen Mun", "Siu Hong", "Tin Shui Wai", "Long Ping", "Yuen Long", 
                         "Kam Sheung Road", "Tsuen Wan West", "Mei Foo", "Nam Cheong", 
                         "Austin", "East Tsim Sha Tsui", "Hung Hom", "Ho Man Tin", 
                         "To Kwa Wan", "Sung Wong Toi", "Kai Tak", "Diamond Hill", "Hin Keng", 
                         "Tai Wai", "Che Kung Temple", "Sha Tin Wai", "City One", "Shek Mun", 
                         "Tai Shui Hang", "Heng On", "Ma On Shan", "Wu Kai Sha"];
      const Manual_Text_C = ["請緊握扶手", "嚴禁飲食", "入閘後及車廂內，嚴禁飲食", 
                         "如感到不適，請落車並請職員協助", "請勿站近車門通道", "部份車門不會打開", 
                         "部分幕門不會打開", "部份閘門不會打開", "列車暫停服務，請所有乘客落車", 
                         "請盡量行入車廂中間"];
      const Manual_Text_E = ["Please hold the handrail", "No eating or drinking", 
                         "No eating or drinking in trains or paid area of stations", 
                         "If you feel unwell, exit and ask for help from staff", 
                         "Move away from door area", "Some doors will not open", 
                         "Some Platform Screen Doors will not open", 
                         "Some Automatic Platform Gates will not open", 
                         "End of train service. Please exit", "Move into the center of the train"];
      function Update() {
        GreyArea = Stn_Passed*98/(No_of_Stn+1)+1;
        Elem = `<div class='Line' style='width: calc(var(--DRM_Scale)/1.02497162316); grid-template-columns: repeat(${No_of_Stn}, auto);'>`;
        for (let i = 0; i < No_of_Stn; i++) {
          Elem += `<p class='ctext StnNameC'>${Stn_C[i]}</p>`;
        }
        Elem += `<div class='Line' style='grid-template-columns: repeat(${No_of_Stn}, auto); background: linear-gradient(to right, White 1%, Silver 1%, Silver ${GreyArea}%, #9B2E08 ${GreyArea}%, #9B2E08 99%, White 99%);'>`;
        for (let i = 0; i < No_of_Stn; i++) {
          if (i<=Stn_Passed) {
            Elem += "<div class='Circ' style='border-color: Silver; background-color: White;'></div>";
          } else {
            Elem += "<div class='Circ' style='border-color: Black; background-color: Yellow;'></div>";
          }
        }
        Elem += "</div>";
        document.getElementById("DRM").innerHTML = Elem;
      }
    </script>
  </body>
</html>
